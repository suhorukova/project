(()=>{"use strict";var t,e,i,r={140449:(t,e,i)=>{i.d(e,{Stickers:()=>s});i(59357);var r=i(511417),n=i(70162),a={},o=(t,e,i,r)=>{delete a[e],1===r?Emoji.favorite.addFavoriteSticker(t,e,i):-1===r&&Emoji.favorite.deleteFavoriteSticker(t,e,i)};var s={toggleFavorite:function(t,e,i){if(e&&e.stopPropagation(),!t.classList.contains("on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var r=(0,n.langStr)(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(window.showFastBox(getLang("global_error"),r).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var s=t.getAttribute("data-sticker-id"),c=t.getAttribute("data-hash");return!(!s||!c)&&(!a[s]&&(a[s]=1,t.classList.toggle("on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:s,hash:c},{onDone:o.pbind(i,s,t)})))},getStickerUrl:function(t,e){var i=String(e);if(r.colorScheme.isDarkScheme()&&(i=i.replace(/b$/,"")+"b"),window.Emoji){var n,a,o,s=null===(n=Emoji.stickersById)||void 0===n||null===(a=n[t])||void 0===a||null===(o=a.sticker[Emoji.STICKER_FIELD_IMAGES])||void 0===o?void 0:o[i];if(s)return s}var c={id:t,size:i};if(window.isMVK){if(window.stickers_cache){var l=window.stickers_cache.getStickerImage(t,i);if(l)return l}return window.store.stickers&&window.rs(window.store.stickers.url_template,{id:t,size:i})}return window.getTemplate("stickers_sticker_url",c)}}},802215:(t,e,i)=>{i.d(e,{StickersAnimation:()=>r});i(66108),i(296253);var r=function(){var t,e,i,n=!1,a=!1,o={},s={},c={},l={};function u(t){var e=v(t),i=1;if(e){hasClass(t,"animation_play")||(hide(geByClass1("sticker_img",t)),addClass(t,"animation_play")),e.play();var r=attr(t,"data-loop-count");r=parseInt(r),isNaN(r)&&(r=3),-1!==r&&(!e._cbs.loopComplete||e._cbs.loopComplete&&0===e._cbs.loopComplete.length)&&e.addEventListener("loopComplete",(function n(a){i++;var o=!0;r>=i&&(o=!1),o&&(f(t,!1),""!==e._cbs.loopComplete&&e.removeEventListener("loopComplete",n),e.stop())}))}}function d(t){var e=attr(t,"data-uid");return e||(e=attr(t,"data-uid",Math.random().toString(32).substr(2))),e}function f(t,e){l[d(t)]=e}function v(t){var e=attr(t,"data-uniq-id");if(!geByClass1("svg_sticker_animation",t))return!1;var i=s[e];return i||!1}function m(t,e){var r=v(t);if(r)"function"==typeof e&&e(r);else{var n=attr(t,"data-uniq-id");if(!l[d(t)]){f(t,!0);var a=attr(t,"data-animation-path"),c=attr(t,"data-sticker-id"),u=!1;if(c&&(u=(o[c]||a)&&g(t)),u){var m=attr(t,"data-animation-class")||"",p={container:t,renderer:"svg",loop:!0,autoplay:!1,name:n,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:`svg_sticker_animation ${m}`}};o[c]?p.animationData=o[c]:p.path=a;var y=geByClass1("svg_sticker_animation",t);if(y&&re(y),r=i.loadAnimation(p),!o[c])return void r.addEventListener("data_ready",(function(){o[c]=r.animationData,s[n]=r,"function"==typeof e&&e(r)}))}"function"==typeof e&&(s[n]=r,"function"==typeof e&&e(r))}}}function p(){return e().then((t=>(i=t,t)))}return{init(t){e=t.animatorLoader},checkSettingsAndLoadInWeb:function(t){if(StickersSettings.getAutoplay()){var e=ge("fc_msg"+t),i=geByClass1("sticker_animation",e);r.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(t){if(StickersSettings.getAutoplay()){var e=$(`.msg_id_${t} .sticker_animation`);r.loadAndPlaySticker(e)}},loadStickerInMvkIMAndPlay:function(t,e){var i="_msg"+t;e&&(i="msg_id_"+t);var n=geByClass1("sticker_animation",geByClass1(i));r.loadAndPlayStickerWithTimer(n,500)},loadAutoplayAnimationStickers:function(t){if(i){if(t){if(a)return;a=!0}if(!n){n=!0;var e=geByClass("sticker_animation_autoplay");e&&each(e,(function(t,e){m(e,(function(){u(e)}))})),n=!1}}else p().then((()=>{r.loadAutoplayAnimationStickers(t)}))},loadAndPlaySticker:function(t){t&&(i?requestAnimationFrame((()=>{m(t,(function(){u(t)}))})):p().then((()=>{r.loadAndPlaySticker(t)})))},loadAndPlayStickerWithTimer:function(t,e){if(t&&!c[t]){e||(e=1e3);var i=ge(t);hasClass(i,"sticker_animation_disabled_timer")||(c[t]=setTimeout((function(){!i&&(i=ge(t),hasClass(i,"sticker_animation_disabled_timer"))||(r.loadAndPlaySticker(i),clearTimeout(c[t]),c[t]=!1)}),e))}},reloadStickers:function(){s={}},touchStartSticker:function(e){e.addEventListener("contextmenu",r.preventContextMenu,!1),t=setTimeout((function(){r.loadAndPlaySticker(e)}),500)},touchEndSticker:function(){t&&clearTimeout(t)},preventContextMenu:function(t){t.preventDefault(),t.stopPropagation()}};function g(t){var e=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom;return e<window.innerHeight&&i>=0&&isVisible(t)}}()},149592:(t,e,i)=>{i.d(e,{StickersSettings:()=>r});var r={autoplay:0,setAutoplay:function(t){this.autoplay=t},getAutoplay:function(){return!!r.autoplay&&!r.isPreventAutoplayByCalls()},isPreventAutoplayByCalls:function(){return!!window.Calls&&window.Calls.isInActiveCall}}},453262:(t,e,i)=>{i.d(e,{StickersAnimation:()=>r.StickersAnimation});i(940851),i(296253);var r=i(802215),n=i(791963);r.StickersAnimation.init({animatorLoader:()=>Promise.resolve(n.default)})},70162:(t,e,i)=>{i.d(e,{langNumeric:()=>n,langSex:()=>a,langStr:()=>o,langReplace:()=>s,langTag:()=>c});var r=i(40906);function n(t,e,i){var n,a=window.langConfig;if(!e||!a){if(!(0,r.isNumeric)(t)){var o=new Error("Non-numeric value passed to langNumeric");throw console.log(t,o),o}return String(t)}Array.isArray(e)?(n=e[1],t!=Math.floor(t)?n=e[a.numRules.float]:(a.numRules.int||[]).some((function(i){if("*"===i[0])return n=e[i[2]],!0;var r=i[0]?t%i[0]:t;return Array.isArray(i[1])&&i[1].includes(r)?(n=e[i[2]],!0):void 0}))):n=e;var s=String(t);if(i){for(var c=s.split("."),l=[],u=c[0].length-3;u>-3;u-=3)l.unshift(c[0].slice(u>0?u:0,u+3));c[0]=l.join(a.numDel),s=c.join(a.numDec)}return n=(n||"%s").replace("%s",s)}function a(t,e){if(!Array.isArray(e))return e;var i=e[1],r=window.langConfig;return r?(r.sexRules&&r.sexRules.some((function(r){return"*"===r[0]||Number(t)===Number(r[0])&&e[r[1]]?(i=e[r[1]],!0):void 0})),i):i}function o(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=String(t),n=0;n<e.length;n+=2){var a=e[n];if(null!=a){var o=String(e[n]).startsWith("%")?e[n]:"{"+e[n]+"}";r=r.replace(o,e[n+1])}}return r}function s(t,e){for(var i in e)if(e.hasOwnProperty(i)){var r="{"+i+"}";t=t.replace(r,e[i])}return t}function c(t,e,i,r){return void 0===r&&(r="tag"),i=(i=i.replace("{"+r+"}",t)).replace("{/"+r+"}",e)}},844475:(t,e,i)=>{var r=i(453262),n=i(149592),a=i(140449);window.StickersAnimation=r.StickersAnimation,window.StickersSettings=n.StickersSettings,window.Stickers=a.Stickers;try{window.stManager.done(window.jsc("web/stickers.js"))}catch(t){}}},n={};function a(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return r[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=r,t=[],a.O=(e,i,r,n)=>{if(!i){var o=1/0;for(u=0;u<t.length;u++){for(var[i,r,n]=t[u],s=!0,c=0;c<i.length;c++)(!1&n||o>=n)&&Object.keys(a.O).every((t=>a.O[t](i[c])))?i.splice(c--,1):(s=!1,n<o&&(o=n));if(s){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,r,n]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var n=Object.create(null);a.r(n);var o={};e=e||[null,i({}),i([]),i(i)];for(var s=2&r&&t;"object"==typeof s&&!~e.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,a.d(n,o),n},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.e=()=>Promise.resolve(),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={54346:0};a.O.j=e=>0===t[e];var e=(e,i)=>{var r,n,[o,s,c]=i,l=0;for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a);for(e&&e(i);l<o.length;l++)n=o[l],a.o(t,n)&&t[n]&&t[n][0](),t[o[l]]=0;return a.O(u)},i=self.webpackChunkvk=self.webpackChunkvk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=a.O(void 0,[11216,38288,68592],(()=>a(844475)));o=a.O(o)})();